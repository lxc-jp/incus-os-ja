# 共通API

IncusOSの各アプリケーションは、必要に応じて再起動し、またバックアップ、リストアー、リセットの操作を行うために使える共通のAPIを持っています。

## アプリケーションの状態を取得

```
incus admin os application show <name>
```

## アプリケーションを再起動

必要な場合に、以下のコマンドを実行してアプリケーションを再起動できます。

```
incus admin os application restart <name>
```

```{note}
アプリケーションとともにアプリケーションのHTTP RESTエンドポイとも再起動されるため、EOFを受け取るのは正常です。
```

## アプリケーションをバックアップ

```{important}
IncusOSのアプリケーションのバックアップは機密データと認証情報を含む場合があります。そのため、バックアップは公開アクセス可能な場所に保管すべきではありません。
```

作成されるアプリケーションのバックアップは状態と設定を含みます。オプションで、完全なバックアップも作成できます。これはすべてのローカルにキャッシュされたアーティファクトやアップデートを含みます。

### 設定オプション

* `complete`: `true`の場合、フルバックアップが生成されます。これはアプリケーションがローカルにキャッシュしていたアーティファクトやアップデートによってはサイズが非常に大きくなるかもしれません。

### 例

バックアップを作成するには以下のコマンドを実行します。

```
incus admin os application backup <name> archive.tar.gz -d '{"complete":false}'
```

## アプリケーションをリストアー

```{warning}
バックアップをリストアーすると既存のアプリケーションのすべての状態を上書きします。そのため、リストアーする際は注意してください。
```

バックアップをリストアーするには以下のコマンドを実行します。

```
incus admin os application restore <name> backup.tar.gz
```

```{note}
リストアー実行後、アプリケーションとともにアプリケーションのHTTP RESTエンドポイントも再起動されるため、EOFを受け取るのは正常です。
```

## ファクトリーリセット

```{warning}
ファクトリーリセットはアプリケーションのすべての設定と状態を消去します。
```

アプリケーションをリセットするには以下のコマンドを実行します。

```
incus admin os application factory-reset <name>
```

```{note}
アプリケーションをリセット後、アプリケーションとともにアプリケーションのHTTP RESTエンドポイントも再起動されるため、EOFを受け取るのは正常です。
```
